
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- 引入 ECharts 文件 -->
    <script src="echarts.js"></script>
    <script src="http://datamaps.github.io/scripts/d3.min.js"></script>
</head>
</html>

<body>
    <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
    <div id="main" style="width: 600px;height:400px;"></div>

     <script type="text/javascript">

 var myChart = echarts.init(document.getElementById('main'));
var export2013=0;
var export2014=0;
var export2015=0;
var export2016=0;
var import2013=0;
var import2014=0;
var import2015=0;
var import2016=0;

d3.csv("export.csv", function(data){
d3.csv("import.csv",function(data1){

for(var i=0;i<1430;i++)
{
  if(data[i]["abbreviatn"]=='World')
    {
      
      export2013=parseFloat(data[i]["val2013"])+parseFloat(export2013);
       export2014=parseFloat(data[i]["val2014"])+parseFloat(export2014);
        export2015=parseFloat(data[i]["val2015"])+parseFloat(export2015);
         export2016=parseFloat(data[i]["val2016"])+parseFloat(export2016);

     import2013=parseFloat(data1[i]["val2013"])+parseFloat(import2013);
       import2014=parseFloat(data1[i]["val2014"])+parseFloat(import2014);
        import2015=parseFloat(data1[i]["val2015"])+parseFloat(import2015);
         import2016=parseFloat(data1[i]["val2016"])+parseFloat(import2016);

         export2013= parseFloat(export2013.toFixed(2));
          export2014= parseFloat(export2014.toFixed(2));
           export2015= parseFloat(export2015.toFixed(2)); 
            export2016= parseFloat(export2016.toFixed(2));

        import2013= parseFloat(import2013.toFixed(2));
          import2014= parseFloat(import2014.toFixed(2));
           import2015= parseFloat(import2015.toFixed(2)); 
            import2016= parseFloat(import2016.toFixed(2));

     // importyear[j]=
      
      // console.log(j+data[i]["statename"]+' '+ parseFloat(exportsum[j]));
           }
     
    }

 //   console.log(export2013);

var option = {
   
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'shadow'
        }
    },
    legend: {
        data: ['import', 'export']
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis: {
        type: 'value',
        boundaryGap: [0, 0.01]
    },
    yAxis: {
        type: 'category',
        data: ['2013','2014','2015','2016']
    },
    series: [
        {
            name: 'import',
            type: 'bar',
            data: [import2013, import2014, import2015, import2016]
        },
        {
            name: 'export',
            type: 'bar',
            data: [export2013, export2014, export2015, export2016]
        }
    ]
};


 myChart.setOption(option);
});
});
    </script>
</body>
</html>